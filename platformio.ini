[platformio]
; Keep transient build/dependency files on the local system drive.
; Use a no-space path to avoid esptool argument splitting on Windows.
; Use a dedicated cache folder for this active project copy.
build_dir = ${sysenv.SYSTEMDRIVE}/.platformio/openhaldex-s3-pio-gdrive/build
libdeps_dir = ${sysenv.SYSTEMDRIVE}/.platformio/openhaldex-s3-pio-gdrive/libdeps

[env:lilygo-t2can-s3]
platform = https://github.com/pioarduino/platform-espressif32.git#55.03.36
board = esp32-s3-devkitc1-n16r8
framework = arduino

monitor_speed = 115200
upload_speed = 921600

board_build.flash_size = 16MB
board_build.partitions = partitions.csv
board_build.filesystem = littlefs
board_build.flash_mode = qio

lib_deps =
  ArduinoJson@7.4.2
  AsyncTCP@3.4.10
  ESP Async WebServer@3.0.6
  autowp-mcp2515@1.3.1

lib_ignore =
  AsyncTCP_RP2040W
  Async TCP


build_flags =
  -D OPENHALDEX_S3
  -D CORE_DEBUG_LEVEL=3
  -D ARDUINO_USB_CDC_ON_BOOT=1

extra_scripts =
  pre:scripts/version.py
  pre:scripts/pre_upload_ota_reset.py
