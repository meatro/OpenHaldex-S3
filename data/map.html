<!--
OpenHaldex-S3 UI
Â© 2026 SpringfieldVW.com
Licensed under the OpenHaldex-S3 UI Attribution License (see /data/LICENSE)
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OpenHaldex Map Editor</title>
    <link rel="stylesheet" href="/styles.css?v=9" />
  </head>
  <body data-page="map">
    <header class="appHeader">
      <div class="titleWrap">
        <div class="brandMark">OH</div>
        <div>
          <h1>Map Editor</h1>
        </div>
      </div>
      <div class="toolbar">
        <label class="toggle" title="Toggle light/dark">
          <input id="themeSwitch" type="checkbox" />
          <span class="label" id="themeLabel">Light</span>
          <div aria-hidden="true" class="dot"></div>
        </label>
      </div>
    </header>

    <nav class="navBar">
      <a href="/">Home</a>
      <a href="/map">Map</a>
      <a href="/canview">CAN View</a>
      <a href="/diag">Diagnostics</a>
      <a href="/ota">OTA</a>
    </nav>

    <main>
      <div class="panel">
        <div class="hint">Live map table (active cell follows speed/throttle).</div>
        <div class="grid">
          <table id="mapTable"></table>
        </div>
      </div>

      <div class="panel">
        <div class="row mapRow">
          <label class="grow"
            >Map file
            <select id="mapSelect" class="grow"></select
          ></label>
          <button id="btnLoadMap">Load selected</button>
          <button id="btnRefresh">Refresh</button>
          <button id="btnLoad">Load current</button>
          <button id="btnSave">Save current</button>
        </div>

        <div class="row mapRow">
          <label class="grow"
            >Save as <input id="mapName" type="text" placeholder="new map name" class="grow"
          /></label>
          <button id="btnSaveMap">Save as new</button>
          <button id="btnDeleteMap">Delete selected</button>
        </div>

        <details class="mapAdvanced">
          <summary>Import / Export</summary>
          <div class="row mapRow">
            <button id="btnDownload">Download TXT</button>
            <label class="fileRow"
              >Upload TXT <input id="fileInput" type="file" accept=".txt"
            /></label>
          </div>
        </details>

        <details class="mapAdvanced">
          <summary>Bin Configuration</summary>
          <div class="row mapBinsRow">
            <div>
              <div class="sub">Speed bins</div>
              <div class="bins" id="speedBins"></div>
            </div>
            <div>
              <div class="sub">Throttle bins</div>
              <div class="bins" id="throttleBins"></div>
            </div>
          </div>
        </details>

        <details class="mapAdvanced">
          <summary>Column Shaping</summary>
          <div class="row mapRow mapShapeRow">
            <div class="shapeMeta">
              <span class="sub">Selected column</span>
              <span id="shapeColLabel" class="pill">None</span>
            </div>
            <label class="mapRange"
              >Start
              <input id="shapeStart" type="range" min="0" max="100" value="0" />
              <span id="shapeStartVal" class="pill">0</span>
            </label>
            <label class="mapRange"
              >End
              <input id="shapeEnd" type="range" min="0" max="100" value="100" />
              <span id="shapeEndVal" class="pill">100</span>
            </label>
            <button id="btnApplyShape">Apply to column</button>
          </div>
        </details>

        <span class="status" id="status"></span>
      </div>
    </main>

    <footer class="siteFooter">OpenHaldex-S3 by SpringfieldVW.com</footer>

    <script src="/scripts.js?v=9"></script>
  </body>
</html>
